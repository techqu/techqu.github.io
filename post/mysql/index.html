<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    <meta property="og:site_name" content="Quguang&#39;s Blog">
    <meta property="og:type" content="article">

    
    <meta property="og:image" content="https://quguang.wang/img/bg-china.jpg">
    <meta property="twitter:image" content="https://quguang.wang/img/bg-china.jpg" />
    

    
    <meta name="title" content="《MYSQL实战45讲》-笔记" />
    <meta property="og:title" content="《MYSQL实战45讲》-笔记" />
    <meta property="twitter:title" content="《MYSQL实战45讲》-笔记" />
    

    
    <meta name="description" content="瞿广，程序员, 开源爱好者，生活探险家 | 这里是 瞿广 的博客，与你一起发现更大的世界。">
    <meta property="og:description" content="瞿广，程序员, 开源爱好者，生活探险家 | 这里是 瞿广 的博客，与你一起发现更大的世界。" />
    <meta property="twitter:description" content="瞿广，程序员, 开源爱好者，生活探险家 | 这里是 瞿广 的博客，与你一起发现更大的世界。" />
    

    
    <meta property="twitter:card" content="summary" />
    
    

    <meta name="keyword"  content="瞿广, quguang, , 瞿广的网络日志, 瞿广的博客, quguang Blog, 博客, 个人网站, 互联网, Web, 云原生, PaaS, Istio, Kubernetes, 微服务, Microservice">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>《MYSQL实战45讲》-笔记-瞿广的博客 | quguang Blog</title>

    <link rel="canonical" href="/post/mysql/">

    <link rel="stylesheet" href="/css/iDisqus.min.css"/>
	
    
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    
    <link rel="stylesheet" href="/css/hux-blog.min.css">

    
    <link rel="stylesheet" href="/css/syntax.css">
    
    
    <link rel="stylesheet" href="/css/zanshang.css">
    
    
    <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    
    

    
    
    <script src="/js/jquery.min.js"></script>
    
    
    <script src="/js/bootstrap.min.js"></script>
    
    
    <script src="/js/hux-blog.min.js"></script>

    
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/docco.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    
    

</head>



<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Quguang&#39;s Blog</a>
        </div>

        
        
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>
                    
                    <li>
                        <a href="/categories/life">life</a>
                    </li>
                    
                    <li>
                        <a href="/categories/math">math</a>
                    </li>
                    
                    <li>
                        <a href="/categories/note">note</a>
                    </li>
                    
                    <li>
                        <a href="/categories/tech">tech</a>
                    </li>
                    
                    
		    
                        <li><a href="/top/about/">ABOUT</a></li>
                    

                    
		    <li>
                        <a href="/search">SEARCH <img src="/img/search.png" height="15" style="cursor: pointer;" alt="Search"></a>
		    </li>
                    
                </ul>
            </div>
        </div>
        
    </div>
    
</nav>
<script>
    
    
    
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        
            $navbar.className = " ";
            
            setTimeout(function(){
                
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>




<style type="text/css">
    header.intro-header {
        background-image: url('/img/bg-china.jpg')
    }
</style>
<header class="intro-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                        <a class="tag" href="/tags/mysql" title="MySQL">
                            MySQL
                        </a>
                        
                    </div>
                    <h1>《MYSQL实战45讲》-笔记</h1>
                    <h2 class="subheading"></h2>
                    <span class="meta">
                        Posted by 
                        
                            瞿广
                         
                        on 
                        Wednesday, December 19, 2018
                        
                        
                        
                        <br>Last Modified on Wednesday, May 22, 2019
                        
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>




<article>
    <div class="container">
        <div class="row">

            
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                
                <header>
                    <h2>TOC</h2>
                </header>
                <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#基础架构-一条sql查询语句是如何执行的">基础架构：一条SQL查询语句是如何执行的</a>
<ul>
<li><a href="#mysql架构组成">mysql架构组成</a></li>
</ul></li>
<li><a href="#日志系统-一条sql更新语句是如何执行的">日志系统：一条SQL更新语句是如何执行的</a>
<ul>
<li><a href="#innoddb-redo-log">InnodDB redo log</a></li>
<li><a href="#mysql-binlog-归档日志">MYSQL binlog（归档日志）</a></li>
<li><a href="#不同点">不同点</a></li>
<li><a href="#redolog两阶段提交">redolog两阶段提交</a></li>
</ul></li>
<li><a href="#事务隔离-为什么你改了我还看不见">事务隔离：为什么你改了我还看不见</a>
<ul>
<li><a href="#sql标准的事务隔离级别">SQL标准的事务隔离级别</a></li>
<li><a href="#事务隔离的实现">事务隔离的实现</a></li>
<li><a href="#事务的启动方式">事务的启动方式</a></li>
</ul></li>
<li><a href="#深入浅出索引-上">深入浅出索引(上)</a>
<ul>
<li><a href="#索引的常见类型">索引的常见类型</a></li>
<li><a href="#innodb的索引类型">InnoDB的索引类型</a></li>
<li><a href="#索引维护">索引维护</a></li>
</ul></li>
<li><a href="#深入浅出索引-下">深入浅出索引(下)</a>
<ul>
<li><a href="#覆盖索引">覆盖索引</a></li>
<li><a href="#最左前缀原则">最左前缀原则</a></li>
<li><a href="#索引下推">索引下推</a></li>
<li><a href="#mysql中explain的type类型">MySQL中explain的type类型</a></li>
</ul></li>
<li><a href="#全局锁和表锁">全局锁和表锁</a>
<ul>
<li><a href="#全局锁的典型使用场景是-做全库逻辑备份">全局锁的典型使用场景是，做全库逻辑备份</a></li>
<li><a href="#表级锁">表级锁</a></li>
</ul></li>
<li><a href="#行锁">行锁</a></li>
<li><a href="#事务到底是隔离的还是不隔离的">事务到底是隔离的还是不隔离的</a></li>
<li><a href="#普通索引和唯一索引-应该如何选择">普通索引和唯一索引，应该如何选择</a>
<ul>
<li><a href="#change-buffer-和-redolog-对比">change buffer 和 redolog 对比</a></li>
</ul></li>
<li><a href="#in和or对比的结论">in和OR对比的结论：</a></li>
<li><a href="#18-为什么这些sql语句逻辑相同-性能却差异巨大">18|为什么这些SQL语句逻辑相同，性能却差异巨大？</a></li>
<li><a href="#19-为什么我只查一行的语句-也执行这么慢">19 | 为什么我只查一行的语句，也执行这么慢？</a></li>
<li><a href="#20-幻读是什么-幻读有什么问题">20 | 幻读是什么，幻读有什么问题？</a></li>
<li><a href="#21-为什么我只改一行的语句-锁这么多">21 | 为什么我只改一行的语句，锁这么多？</a></li>
<li><a href="#22-mysql有哪些-饮鸩止渴-提高性能的方法">22 | MySQL有哪些“饮鸩止渴”提高性能的方法？</a></li>
<li><a href="#23-mysql是怎么保证数据不丢的">23 | MySQL是怎么保证数据不丢的？</a></li>
<li><a href="#24-mysql是怎么保证主备一致的">24 | MySQL是怎么保证主备一致的？</a></li>
<li><a href="#25-mysql是怎么保证高可用的">25 | MySQL是怎么保证高可用的？</a></li>
<li><a href="#26-备库为什么会延迟好几个小时">26 | 备库为什么会延迟好几个小时？</a></li>
<li><a href="#27-主库出问题了-从库怎么办">27 | 主库出问题了，从库怎么办？</a></li>
<li><a href="#28-读写分离有哪些坑">28 | 读写分离有哪些坑？</a></li>
<li><a href="#29-如何判断一个数据库是不是出问题了">29 | 如何判断一个数据库是不是出问题了？</a></li>
<li><a href="#30-答疑文章-二-用动态的观点看加锁">30 | 答疑文章（二）：用动态的观点看加锁</a></li>
<li><a href="#31-误删数据后除了跑路-还能怎么办">31 | 误删数据后除了跑路，还能怎么办？</a></li>
<li><a href="#32-为什么还有kill不掉的语句">32 | 为什么还有kill不掉的语句？</a></li>
<li><a href="#33-我查这么多数据-会不会把数据库内存打爆">33 | 我查这么多数据，会不会把数据库内存打爆？</a></li>
<li><a href="#34-到底可不可以使用join">34 | 到底可不可以使用join？</a></li>
<li><a href="#35-join语句怎么优化">35 | join语句怎么优化？</a></li>
<li><a href="#36-为什么临时表可以重名">36 | 为什么临时表可以重名？</a></li>
<li><a href="#37-什么时候会使用内部临时表">37 | 什么时候会使用内部临时表？</a></li>
<li><a href="#38-都说innodb好-那还要不要使用memory引擎">38 | 都说InnoDB好，那还要不要使用Memory引擎？</a></li>
<li><a href="#39-自增主键为什么不是连续的">39 | 自增主键为什么不是连续的？</a></li>
<li><a href="#40-insert语句的锁为什么这么多">40 | insert语句的锁为什么这么多？</a></li>
<li><a href="#41-怎么最快地复制一张表">41 | 怎么最快地复制一张表？</a></li>
<li><a href="#42-grant之后要跟着flush-privileges吗">42 | grant之后要跟着flush privileges吗？</a></li>
<li><a href="#43-要不要使用分区表">43 | 要不要使用分区表？</a></li>
<li><a href="#44-答疑文章-三-说一说这些好问题">44 | 答疑文章（三）：说一说这些好问题</a></li>
<li><a href="#45-自增id用完怎么办">45 | 自增id用完怎么办？</a></li>
<li><a href="#结束语-点线网面-一起构建mysql知识网络">结束语 | 点线网面，一起构建MySQL知识网络</a></li>
</ul></li>
</ul>
</nav>
                
                <p>MYSQL实战45讲-极客时间笔记</p>

<h2 id="基础架构-一条sql查询语句是如何执行的">基础架构：一条SQL查询语句是如何执行的</h2>

<h3 id="mysql架构组成">mysql架构组成</h3>

<p>MySQL的逻辑架构图</p>

<p><img src="/img/mysql-framework.png" alt="mysql-framework" /></p>

<ul>
<li>server端

<ul>
<li>连接器：管理连接、权限验证</li>
<li>分析器：词法分析、语法分析</li>
<li>优化器：执行计划生成、索引选择</li>
<li>执行器：操作引擎、返回结果</li>
</ul></li>
<li>存储引擎：存储数据，提供读写接口</li>
</ul>

<h2 id="日志系统-一条sql更新语句是如何执行的">日志系统：一条SQL更新语句是如何执行的</h2>

<pre><code>mysql&gt; create table T(ID int primary key, c int);

mysql&gt; update T set c=c+1 where ID=2;

</code></pre>

<h3 id="innoddb-redo-log">InnodDB redo log</h3>

<p>如果每次的更新操作都需要写进磁盘，然后磁盘也要找到对应的那条记录，然后再更新，整个过程IO成本、查找成本都很高。为了解决这个问题，MySQL的设计者就用了类似酒店掌柜粉板的思路来提升更新效率。</p>

<p>具体来说，当有一条记录需要更新的时候，InnoDB引擎就会把记录写到redo log（粉板）里面，并更新内存，这个时候更新就算完成了。同时，InnoDB引擎会在适当的时候，将这个操作记录更新到磁盘里面，而这个更新往往是在系统比较空闲的时候，这就像打烊以后掌柜做的事。</p>

<ul>
<li>WAL技术：Write-Ahead Logging，先写日志，再写磁盘</li>
<li>当有一条记录需要更新的时候，InnoDB引擎就会先把记录写到redo log里，并更新内存。其它合适时间再写入磁盘</li>
</ul>

<p>有了redo log，Inno DB就可以保证即使数据库发生异常重启，之前提交的记录都不会丢失，这个能力称为<strong>crash-safe</strong></p>

<h3 id="mysql-binlog-归档日志">MYSQL binlog（归档日志）</h3>

<p>redo log是 InnoDB 引擎特有的日志，而Server层也有自己的日志，称为binlog。</p>

<h3 id="不同点">不同点</h3>

<ol>
<li>redo log是InnoDB引擎特有的，binlog是MYSQL的Server层实现的，所有引擎都能用</li>
<li>redo log是物理日志，记录的是“在某个数据页上做了什么修改”；binlog是逻辑日志，记录的是这个语句的原始逻辑。</li>
<li>redo log是循环写的，空间固定会用完；binlog是可以追加写入的，写到一定大小会切换到下一个文件，不会覆盖以前的日志。</li>
</ol>

<p>我们来看执行器和InnoDB引擎在执行这个简单的 update 语句时的内部流程。</p>

<ol>
<li>执行器先找引擎取 ID=2 这一行。 ID 是主键，引擎直接用树搜索找到这一行。如果ID=2 这一行所在的数据页本来就在内存中，就直接返回给执行器；否则，需要先从磁盘读入内存，然后再返回。</li>
<li>执行器拿到引擎给的行数据，把这个值加上 1 ，比如原来是 N ， 现在就是 N+1 ，得到新的一行数据，再调用引擎接口写入这行新数据。</li>
<li>引擎将这行数据更新到内存中，同时将这个更新操作记录到 redo log里面，此时 redo log处于 prepare状体啊。然后告知执行期执行完成了，随时可以提交事务。</li>
<li>执行器生成这个操作的binlog，并把binlog写入磁盘。</li>
<li>执行器调用引擎的提交事务接口，引擎把刚刚写入的redo log改成 提交（commit）状态，更新完成。</li>
</ol>

<h3 id="redolog两阶段提交">redolog两阶段提交</h3>

<ul>
<li>简单说，redo log 和binlog都可以用于表示事务的提交状态，而两阶段提交就是让这两个状态保持逻辑上的一致。</li>
</ul>

<h2 id="事务隔离-为什么你改了我还看不见">事务隔离：为什么你改了我还看不见</h2>

<ul>
<li>ACID</li>
<li>可能出现的问题：脏读、不可重复读、幻读</li>
</ul>

<h3 id="sql标准的事务隔离级别">SQL标准的事务隔离级别</h3>

<ul>
<li>读未提交</li>
<li>读已提交</li>
<li>可重复读</li>
<li>串行化</li>
</ul>

<h3 id="事务隔离的实现">事务隔离的实现</h3>

<h3 id="事务的启动方式">事务的启动方式</h3>

<h2 id="深入浅出索引-上">深入浅出索引(上)</h2>

<h3 id="索引的常见类型">索引的常见类型</h3>

<h3 id="innodb的索引类型">InnoDB的索引类型</h3>

<h3 id="索引维护">索引维护</h3>

<h2 id="深入浅出索引-下">深入浅出索引(下)</h2>

<ul>
<li>回到主键索引树搜索的过程，称为回表</li>
</ul>

<h3 id="覆盖索引">覆盖索引</h3>

<ul>
<li>由于覆盖索引可以减少书的搜索次数，显著提升查询性能，所以使用覆盖索引是一个常用的性能优化手段</li>
</ul>

<h3 id="最左前缀原则">最左前缀原则</h3>

<ul>
<li>第一原则是，如果通过调整顺序，可以少维护一个索引，那么这个顺序往往需要优先考虑采用的。</li>
</ul>

<h3 id="索引下推">索引下推</h3>

<ul>
<li>mysql5.6之后引入索引下推优化（index condition pushdown），可以在索引遍历过程中，对索引中包含的字段先做判断，直接过滤调不满足条件的记录，减少回表次数</li>
</ul>

<h3 id="mysql中explain的type类型">MySQL中explain的type类型</h3>

<p><strong>注：由上至下，效率越来越高</strong></p>

<table>
<thead>
<tr>
<th>type</th>
<th>含义</th>
</tr>
</thead>

<tbody>
<tr>
<td>ALL</td>
<td>全表扫描</td>
</tr>

<tr>
<td>index</td>
<td>索引全扫描</td>
</tr>

<tr>
<td>range</td>
<td>索引范围扫描，常用语&lt;,&lt;=,&gt;=,between等操作</td>
</tr>

<tr>
<td>ref</td>
<td>使用非唯一索引扫描或唯一索引前缀扫描，返回单条记录，常出现在关联查询中</td>
</tr>

<tr>
<td>eq_ref</td>
<td>类似ref，区别在于使用的是唯一索引，使用主键的关联查询</td>
</tr>

<tr>
<td>const/system</td>
<td>单条记录，系统会把匹配行中的其他列作为常数处理，如主键或唯一索引查询</td>
</tr>

<tr>
<td>null</td>
<td>MySQL不访问任何表或索引，直接返回结果</td>
</tr>
</tbody>
</table>

<h2 id="全局锁和表锁">全局锁和表锁</h2>

<h3 id="全局锁的典型使用场景是-做全库逻辑备份">全局锁的典型使用场景是，做全库逻辑备份</h3>

<h3 id="表级锁">表级锁</h3>

<ol>
<li>表锁 lock tables &hellip; read/write ,一般不使用</li>
<li>元数据锁（meta data lock，MDL）MYSQL5.5引入MDL

<ul>
<li>当对一个表做增删改查操作的时候，加MDL读锁；</li>
<li>当要对表做结构变更操作的时候，加MDL写锁；</li>
</ul></li>
</ol>

<h2 id="行锁">行锁</h2>

<ul>
<li>两阶段锁协议</li>
<li>死锁和死锁检测</li>
</ul>

<h2 id="事务到底是隔离的还是不隔离的">事务到底是隔离的还是不隔离的</h2>

<ul>
<li>“快照”在MVCC里是怎么工作的</li>
<li>InnoDB利用了“所有数据都有多个版本”的这个特性，实现了“秒级创建快照”的能力</li>
</ul>

<h2 id="普通索引和唯一索引-应该如何选择">普通索引和唯一索引，应该如何选择</h2>

<ul>
<li>从普通索引和唯一索引的选择开始，分享了数据的查询和更新过程，然后说明了change buffer的机制以及应用场景，最后讲到了索引选择的实践。</li>
<li>由于唯一索引用不上change buffer的优化机制，因此如果业务可以接受，从性能角度出发，建议优先考虑非唯一索引。</li>
</ul>

<h3 id="change-buffer-和-redolog-对比">change buffer 和 redolog 对比</h3>

<p>redolog 用的WAL技术，更新操作记录在日志里，是为了减少当前读写磁盘，优化的是这次更新的读写操作。</p>

<blockquote>
<p>出自：<a href="https://time.geekbang.org/column/article/68633">02 | 日志系统：一条SQL更新语句是如何执行的？</a></p>
</blockquote>

<p>chang buffer是把更新操作记录在内存里，是为了减少后续查询读磁盘，优化的是后续的读操作。</p>

<blockquote>
<p>出自：<a href="https://time.geekbang.org/column/article/70848">09 | 普通索引和唯一索引，应该怎么选择？</a></p>
</blockquote>

<h2 id="in和or对比的结论">in和OR对比的结论：</h2>

<p>1.in或or在字段有添加索引的情况下，查询很快，两者查询速度没有什么区别；</p>

<p>2.in或or在字段没有添加索引的情况下,所连接的字段越多(1or2or3or4or&hellip;&hellip;)，or比in的查询效率低很多</p>

<h2 id="18-为什么这些sql语句逻辑相同-性能却差异巨大">18|为什么这些SQL语句逻辑相同，性能却差异巨大？</h2>

<p>案例一：条件字段函数操作</p>

<p><strong>对索引字段做函数操作，可能会破坏索引值的有序性，因此优化器就决定放弃走树搜索功能</strong></p>

<p>比如对 t_modified 字段加了 month（）函数操作，导致了全索引扫描。无法使用索引的快速定位能力了。</p>

<p>案例二： 隐式类型转换</p>

<p>按理三： 隐式字符编码转换</p>

<h2 id="19-为什么我只查一行的语句-也执行这么慢">19 | 为什么我只查一行的语句，也执行这么慢？</h2>

<p>表级：</p>

<ol>
<li>查询长时间不返回。是使用 show processlist 命令查看 Wait for table metadata lock</li>
<li>等flush。所以，出现 Waiting for table flush 状态的可能情况是：有一个 flush tables 命令被别的语句堵住了，然后它又堵住了我们的 select 语句。</li>
</ol>

<p>行级别：</p>

<ol>
<li>等行锁</li>
<li>查询慢</li>
</ol>

<h2 id="20-幻读是什么-幻读有什么问题">20 | 幻读是什么，幻读有什么问题？</h2>

<h2 id="21-为什么我只改一行的语句-锁这么多">21 | 为什么我只改一行的语句，锁这么多？</h2>

<h2 id="22-mysql有哪些-饮鸩止渴-提高性能的方法">22 | MySQL有哪些“饮鸩止渴”提高性能的方法？</h2>

<h2 id="23-mysql是怎么保证数据不丢的">23 | MySQL是怎么保证数据不丢的？</h2>

<h2 id="24-mysql是怎么保证主备一致的">24 | MySQL是怎么保证主备一致的？</h2>

<h2 id="25-mysql是怎么保证高可用的">25 | MySQL是怎么保证高可用的？</h2>

<h2 id="26-备库为什么会延迟好几个小时">26 | 备库为什么会延迟好几个小时？</h2>

<h2 id="27-主库出问题了-从库怎么办">27 | 主库出问题了，从库怎么办？</h2>

<h2 id="28-读写分离有哪些坑">28 | 读写分离有哪些坑？</h2>

<h2 id="29-如何判断一个数据库是不是出问题了">29 | 如何判断一个数据库是不是出问题了？</h2>

<h2 id="30-答疑文章-二-用动态的观点看加锁">30 | 答疑文章（二）：用动态的观点看加锁</h2>

<h2 id="31-误删数据后除了跑路-还能怎么办">31 | 误删数据后除了跑路，还能怎么办？</h2>

<h2 id="32-为什么还有kill不掉的语句">32 | 为什么还有kill不掉的语句？</h2>

<h2 id="33-我查这么多数据-会不会把数据库内存打爆">33 | 我查这么多数据，会不会把数据库内存打爆？</h2>

<h2 id="34-到底可不可以使用join">34 | 到底可不可以使用join？</h2>

<h2 id="35-join语句怎么优化">35 | join语句怎么优化？</h2>

<h2 id="36-为什么临时表可以重名">36 | 为什么临时表可以重名？</h2>

<h2 id="37-什么时候会使用内部临时表">37 | 什么时候会使用内部临时表？</h2>

<h2 id="38-都说innodb好-那还要不要使用memory引擎">38 | 都说InnoDB好，那还要不要使用Memory引擎？</h2>

<h2 id="39-自增主键为什么不是连续的">39 | 自增主键为什么不是连续的？</h2>

<h2 id="40-insert语句的锁为什么这么多">40 | insert语句的锁为什么这么多？</h2>

<h2 id="41-怎么最快地复制一张表">41 | 怎么最快地复制一张表？</h2>

<h2 id="42-grant之后要跟着flush-privileges吗">42 | grant之后要跟着flush privileges吗？</h2>

<h2 id="43-要不要使用分区表">43 | 要不要使用分区表？</h2>

<h2 id="44-答疑文章-三-说一说这些好问题">44 | 答疑文章（三）：说一说这些好问题</h2>

<h2 id="45-自增id用完怎么办">45 | 自增id用完怎么办？</h2>

<h2 id="结束语-点线网面-一起构建mysql知识网络">结束语 | 点线网面，一起构建MySQL知识网络</h2>

                

                <hr>
                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/post/thread-notify/" data-toggle="tooltip" data-placement="top" title="线程间通信">&larr;
                            Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/post/resume/" data-toggle="tooltip" data-placement="top" title="简历模版">Next
                            Post &rarr;</a>
                    </li>
                    
                </ul>

                
<div id="disqus-comment"></div>



            </div>
            
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                
                
                <section>
                    <hr class="hidden-sm hidden-xs">
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                        
                        
                        
                        <a href="/tags/booklist" title="booklist">
                            booklist
                        </a>
                        
                        
                        
                        <a href="/tags/devops" title="devops">
                            devops
                        </a>
                        
                        
                        
                        <a href="/tags/docker" title="docker">
                            docker
                        </a>
                        
                        
                        
                        <a href="/tags/domain-driven-design" title="domain-driven-design">
                            domain-driven-design
                        </a>
                        
                        
                        
                        <a href="/tags/drools" title="drools">
                            drools
                        </a>
                        
                        
                        
                        <a href="/tags/dubbo" title="dubbo">
                            dubbo
                        </a>
                        
                        
                        
                        <a href="/tags/java" title="java">
                            java
                        </a>
                        
                        
                        
                        <a href="/tags/java%E5%B9%B6%E5%8F%91%E5%AE%9E%E6%88%98" title="java并发实战">
                            java并发实战
                        </a>
                        
                        
                        
                        <a href="/tags/java%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98%E5%AE%9E%E6%88%98" title="java性能调优实战">
                            java性能调优实战
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/jvm" title="jvm">
                            jvm
                        </a>
                        
                        
                        
                        <a href="/tags/kubernetes" title="kubernetes">
                            kubernetes
                        </a>
                        
                        
                        
                        <a href="/tags/linux" title="linux">
                            linux
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/mq" title="mq">
                            mq
                        </a>
                        
                        
                        
                        <a href="/tags/mysql" title="mysql">
                            mysql
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/redis" title="redis">
                            redis
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/spring" title="spring">
                            spring
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/%E4%B9%A6%E5%8D%95" title="书单">
                            书单
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F" title="分布式">
                            分布式
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/%E5%AE%B9%E5%99%A8" title="容器">
                            容器
                        </a>
                        
                        
                        
                        <a href="/tags/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8" title="工具使用">
                            工具使用
                        </a>
                        
                        
                        
                        <a href="/tags/%E5%B9%B6%E5%8F%91" title="并发">
                            并发
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84" title="数据结构">
                            数据结构
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97" title="消息队列">
                            消息队列
                        </a>
                        
                        
                        
                        <a href="/tags/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E9%AB%98%E6%89%8B%E8%AF%BE" title="消息队列高手课">
                            消息队列高手课
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/%E7%AE%97%E6%B3%95" title="算法">
                            算法
                        </a>
                        
                        
                        
                        <a href="/tags/%E7%BC%93%E5%AD%98" title="缓存">
                            缓存
                        </a>
                        
                        
                        
                        <a href="/tags/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE" title="网络协议">
                            网络协议
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA" title="虚拟机">
                            虚拟机
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/%E8%B6%A3%E8%B0%88%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE" title="趣谈网络协议">
                            趣谈网络协议
                        </a>
                        
                        
                        
                        <a href="/tags/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E4%B9%8B%E7%BE%8E" title="软件工程之美">
                            软件工程之美
                        </a>
                        
                        
                        
                        <a href="/tags/%E9%80%8F%E8%A7%86http%E5%8D%8F%E8%AE%AE" title="透视http协议">
                            透视http协议
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/%E9%9D%A2%E8%AF%95" title="面试">
                            面试
                        </a>
                        
                        
                    </div>
                </section>
                

                
                
                <section>
                    <hr>
                    <h5>FRIENDS</h5>
                    <ul class="list-inline">
                        
                        <li><a target="_blank" href="https://servicemesher.com">servicemesher的博客</a></li>
                        
                    </ul>
                </section>
                
            </div>
        </div>
    </div>
</article>




<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                   
                   <li>
                       <a href='' rel="alternate" type="application/rss+xml" title="Quguang&#39;s Blog" >
                           <span class="fa-stack fa-lg">
                               <i class="fa fa-circle fa-stack-2x"></i>
                               <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                           </span>
                       </a>
                   </li>
                   
                    
                    <li>
                        <a href="mailto:quguang1011@gmail.com">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    
                    
                    
                    
                    

                    

		    
                    
                    <li>
                        <a target="_blank" href="/your%20wechat%20qr%20code%20image">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-wechat fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    
                    
                    <li>
                        <a target="_blank" href="https://github.com/techqu">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    
                    
                    
                    
                    <li>
                        <a target="_blank" href="https://www.linkedin.com/in/yourlinkedinid">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    
                    
                    
                    <li>
                        <a target="_blank" href="https://stackoverflow.com/users/yourstackoverflowid">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-stack-overflow fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
            
                    
                    
                    
                </ul>
		<p class="copyright text-muted">
                    Copyright &copy; Quguang&#39;s Blog 2019
                    <br>
                    <a href="https://themes.gohugo.io/hugo-theme-cleanwhite">CleanWhite Hugo Theme</a> by <a href="https://zhaohuabing.com">Huabing</a> |
                    <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="100px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=zhaohuabing&repo=hugo-theme-cleanwhite&type=star&count=true" >
                    </iframe>
                </p>
            </div>
        </div>
    </div>
</footer>




<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>






<script>
    
    if($('#tag_cloud').length !== 0){
        async("/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>


<script>
    async("https://cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>






</body>
</html>
